!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.wsGui=e():t.wsGui=e()}(window,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){t.exports=i.p+"assets/c820cfde.1.jpg"},function(t,e,i){"use strict";i.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var s=function(){return(s=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function o(t,e,i,r){return new(i||(i=Promise))(function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(o,a)}h((r=r.apply(t,e||[])).next())})}function a(t,e){var i,r,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=0<(n=o.trys).length&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function c(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,s=i.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(r=s.next()).done;)o.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function l(t,e){var i=new Map;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=r.join(":");return i.has(s)||(e&&i.size>=e&&i.delete(i.keys().next().value),i.set(s,t.apply(null,r))),i.get(s)}}var f=/\.(jpg|png|gif|jpeg)$/i;function d(t){return"string"==typeof t&&f.test(t)}function p(t,e){var i=t.split(" ");return e&&(i=i.map(function(t){return t.toLowerCase()})),function(t){return e&&(t=t.toLowerCase()),i.includes(t)}}function y(t){return t>-Number.EPSILON&&t<Number.EPSILON}function v(t,e){for(var i=0,r=e-1,n=0;i<=r;){var s=t(n=Math.floor((r+i)/2));if(s<0)r=n-1;else{if(!(0<s))return n;i=n+1}}return i}var g,m,_=l(function(t){return t.replace(/[-_]+(\w)/g,function(t,e){return e.toUpperCase()})}),b=(l(function(t,e){return void 0===e&&(e="-"),t.replace(/[A-Z]/g,function(t){return e+t.toLowerCase()})}),g=new Set,m=0,function(t){return g.has(t)&&(t=""+Date.now().toString(16)+m.toString(16).padStart(6,"0"),m++),g.add(t),t});p("constructor prototype name");var w=0;function x(t,e,i){var r=document.createElement("canvas");return Object.assign(r.style,{position:"absolute",left:0,top:0,width:t+"px",height:e+"px"}),r.setAttribute("data-dom-id",i||"canvas-"+w++),r.width=t*devicePixelRatio,r.height=e*devicePixelRatio,r}var M=l(function(){return document.createElement("canvas").getContext("2d")});function k(t,e){return"string"==typeof t?t.endsWith("%")?e*(parseFloat(t)||0)/100:(parseFloat(t)||0)*devicePixelRatio:(t||0)*devicePixelRatio}function P(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}function T(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null}var A=function(){function t(t,e,i){void 0===i&&(i=0),this.z=i,this.dirty=!0,this.roots=[],this._time=0,this.canvas=x(t,e,"layer"+i),this._drawCanvas=x(t,e,"layer_draw_"+i),this.ctx=this._drawCanvas.getContext("2d"),this._view=this.canvas.getContext("2d")}return t.prototype.add=function(t){var e=this,i=t.parent||t.layer;if(i!==this){i&&i.remove(t,!1),t.layer=this,t.needUpdate=!0,t.left=t.top=null;var r=v(function(i){return t.style.zIndex-e.roots[i].style.zIndex||1},this.roots.length);this.roots.splice(r,0,t),this.dirty=!0}return this},t.prototype.remove=function(t,e){void 0===e&&(e=!0);var i=this.roots.findIndex(function(e){return e===t});return 0<=i&&(t.layer=null,this.roots.splice(i,1),e&&t.dispose(),this.dirty=!0),this},t.prototype.dispose=function(t){this.roots.forEach(function(t){t.layer=null,t.dispose()}),this.roots.length=0,t.removeChild(this.canvas),this.canvas=this.ctx=this._drawCanvas=null},t.prototype.beforeRender=function(){},t.prototype.render=function(){this.beforeRender(),this.dirty&&(this.dirty=!1,this._time=Date.now(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this._render(0))},t.prototype.afterRender=function(){this._view.clearRect(0,0,this.canvas.width,this.canvas.height),this._view.drawImage(this._drawCanvas,0,0)},t.prototype.getTarget=function(t,e){for(var i=this.roots.length-1;0<=i;i--){var r=this.roots[i].getTarget(this.ctx,t,e);if(r)return r}return!1},t.prototype.resize=function(t,e){this.dirty=!0,this._resize(t,e,this.canvas),this._resize(t,e,this._drawCanvas),this.roots.forEach(function(t){return t.needUpdate=!0})},t.prototype._resize=function(t,e,i){Object.assign(i.style,{width:t+"px",height:e+"px"}),i.width=t*devicePixelRatio,i.height=e*devicePixelRatio},t.prototype._render=function(t){return o(this,void 0,void 0,function(){var e;return a(this,function(i){switch(i.label){case 0:return(e=this.roots[t++])?[4,e.draw(this.ctx)]:[3,2];case 1:return i.sent(),this._render(t),[3,3];case 2:this.afterRender(),i.label=3;case 3:return[2]}})})},t}(),S=function(){function t(t){var e=this;this._root=t,this._layers=new Map,this._isOut=!0,Object.assign(t.style,{"-webkit-tap-highlight-color":"transparent","-webkit-user-select":"none","user-select":"none","-webkit-touch-callout":"none"}),t.innerHTML="",["relative","absolute","fixed"].includes(t.style.position)||(t.style.position="relative"),this._initEvent(),P(t,"mouseleave",function(){return e._isOut=!0}),P(t,"mouseenter",function(){return e._isOut=!1})}return t.prototype.getLayer=function(t){return this._layers.get(t)},t.prototype.render=function(){this._layers.forEach(function(t){return t.render()}),this._root&&(this._timer=requestAnimationFrame(this.render.bind(this)))},t.prototype.addLayer=function(t){var e="number"==typeof t?t:t.z;return this._layers.has(e)?console.warn("层级"+e+"已存在"):("number"==typeof t&&(t=new A(this._root.offsetWidth,this._root.offsetHeight,t)),this._addLayerToDom(t)._layers.set(e,t)),this},t.prototype.replaceLayer=function(t){var e=this._layers.get(t.z);return e&&e.dispose(this._root),this._addLayerToDom(t)._layers.set(t.z,t),this},t.prototype.removeLayer=function(t){var e="number"==typeof t?t:t.z,i=this._layers.get(e);return i&&(i.dispose(this._root),this._layers.delete(e)),this},t.prototype.dispose=function(){this._timer&&cancelAnimationFrame(this._timer),this._layers.forEach(this.removeLayer,this),this._root=this._preTarget=null},t.prototype.resize=function(){var t=this;this._layers.forEach(function(e){return e.resize(t._root.offsetWidth,t._root.offsetHeight)})},t.prototype._addLayerToDom=function(t){var e,i;try{for(var r=h(Array.from(this._layers.values())),n=r.next();!n.done;n=r.next()){var s=n.value;if(s.z>t.z)return this._root.insertBefore(t.canvas,s.canvas),this}}catch(t){e={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return this._root.appendChild(t.canvas),this},t.prototype._initEvent=function(){var t=this;["dbclick","click","mousedown","mouseup","mousemove","touchstart","touchmove","touchend"].forEach(function(e){P(t._root,e,function(i){if(!t._isOut){i=i||window.event;var r=function(t,e){if(null!=e.offsetX&&null!=e.offsetY)return{x:e.offsetX,y:e.offsetY};if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),r=e.clientX,n=e.clientY;if(e.touches){if(!e.touches.length)return{x:0,y:0};r=e.touches[0].clientX,n=e.touches[0].clientY}return{x:r-i.left,y:n-i.top}}return{x:0,y:0}}(t._root,i),n=r.x,s=r.y;n*=devicePixelRatio,s*=devicePixelRatio;var o=t._getTarget(n,s),a={x:n,y:s,target:o,cancelBubble:!1};"mousemove"!==e&&"touchmove"!==e||t._moveHandler(a,i,e),o&&"mousemove"!==e&&"touchmove"!==e&&o.notifyEvent(e,i,a)}})})},t.prototype._moveHandler=function(t,e,i){this._preTarget===t.target?t.target&&t.target.notifyEvent(i,e,t):(this._preTarget&&this._preTarget.notifyEvent("mouseout",e,s({},t,{relatedTarget:t.target})),t.target&&t.target.notifyEvent("mouseover",e,s({},t,{relatedTarget:this._preTarget}))),this._preTarget=t.target},t.prototype._getTarget=function(t,e){var i,r,n=Array.from(this._layers.keys()).sort(function(t,e){return e-t});try{for(var s=h(n),o=s.next();!o.done;o=s.next()){var a=o.value,c=this._layers.get(a).getTarget(t,e);if(c)return c}}catch(t){i={error:t}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}},t}(),I=function(){function t(){}return t.prototype.transform=function(t){},t.prototype.copy=function(t){return Object.assign(this,t),this},t.prototype.rotate=function(t){if(t){var e=Math.cos(t),i=Math.sin(t);this.transform([[e,-i,0],[i,e,0],[0,0,1]])}return this},t.prototype.scale=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),Array.isArray(t)&&(e=t[1],t=t[0]),1===t&&1===e||this.transform([[t,0,0],[0,e,0],[0,0,1]]),this},t.prototype.translate=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),Array.isArray(t)&&(e=t[1],t=t[0]),(t||e)&&this.transform([[1,0,t],[0,1,e],[0,0,1]]),this},t}(),C=function(t){function e(e,i,r,n,s,o){void 0===e&&(e=1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=1),void 0===o&&(o=0);var a=t.call(this)||this;return a.a=e,a.c=i,a.e=r,a.b=n,a.d=s,a.f=o,a}return n(e,t),e.prototype.toUnit=function(){return this.a=this.d=1,this.c=this.e=this.b=this.f=0,this},e.prototype.toArray=function(){return[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]]},e.prototype.transform=function(t,i){t instanceof e&&(t=t.toArray());var r=this.toArray(),n=t,s=r;return i&&(n=r,s=t),this.a=n[0][0]*s[0][0]+n[0][1]*s[1][0],this.c=n[0][0]*s[0][1]+n[0][1]*s[1][1],this.e=n[0][0]*s[0][2]+n[0][1]*s[1][2]+n[0][2],this.b=n[1][0]*s[0][0]+n[1][1]*s[1][0],this.d=n[1][0]*s[0][1]+n[1][1]*s[1][1],this.f=n[1][0]*s[0][2]+n[1][1]*s[1][2]+n[1][2],this},e.prototype.invert=function(){var t=this.a*this.d-this.b*this.c||Number.EPSILON;return new e(this.d/t,-this.c/t,(this.c*this.f-this.d*this.e)/t,-this.b/t,this.a/t,(this.b*this.e-this.a*this.f)/t)},e}(I),O=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.w=i,this.h=r}return t.prototype.toArray=function(){return[[this.x,this.x+this.w,this.x+this.w,this.x],[this.y,this.y,this.y+this.h,this.y+this.h],[1,1,1,1]]},t.prototype.extend=function(t){var e=Math.min(t.x,this.x),i=Math.min(t.y,this.y);return this.w=Math.max(t.x+t.w,this.x+this.w)-e,this.h=Math.max(t.y+t.h,this.y+this.h)-i,this.x=e,this.y=i,this},t.prototype.transform=function(t){var e,i,r,n,s,o,a=this.toArray(),h=t.toArray();e=i=Number.MAX_VALUE,r=n=-Number.MAX_VALUE;for(var c=0;c<4;c++)s=h[0][0]*a[0][c]+h[0][1]*a[1][c]+h[0][2],o=h[1][0]*a[0][c]+h[1][1]*a[1][c]+h[1][2],e=Math.min(s,e),i=Math.min(o,i),r=Math.max(s,r),n=Math.max(o,n);return this.x=e,this.y=i,this.w=r-e,this.h=n-i,this},t.prototype.contain=function(t,e){return t>=this.x&&t<=this.x+this.w&&e>=this.y&&e<=this.y+this.h},t.prototype.intersect=function(e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),e instanceof t&&(i=e.y,r=e.w,n=e.h,e=e.x);var s=this.x,o=this.x+this.w,a=this.y,h=this.y+this.h;return!(o<e||e+r<s||h<i||i+n<a)},t.prototype.clone=function(){return new t(this.x,this.y,this.w,this.h)},t}(),E=new Map,R=i(0);function z(t,e){void 0===e&&(e=!0);var i=E.get(t);if(i)return e&&i.count++,Promise.resolve(i.image);var r=new Image;return r.src=t,new Promise(function(e){r.onload=function(){E.set(t,{image:r,count:1}),e(r)},r.onerror=function(){r.src=R}})}function U(t){var e=E.get(t);e&&(e.count--,e.count<=0&&t!==R&&(e.image.src="",E.delete(t)))}z(R);var j={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function D(t){return(t=Math.round(t))<0?0:255<t?255:t}function L(t){return t<0?0:1<t?1:t}function W(t){return t.length&&"%"===t.charAt(t.length-1)?D(parseFloat(t)/100*255):D(parseInt(t,10))}function q(t){return t.length&&"%"===t.charAt(t.length-1)?L(parseFloat(t)/100):L(parseFloat(t))}function V(t,e,i){return i<0?i+=1:1<i&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function F(t){var e=(parseFloat(t[0])%360+360)%360/360,i=q(t[1]),r=q(t[2]),n=r<=.5?r*(i+1):r+i-r*i,s=2*r-n,o=[D(255*V(s,n,e+1/3)),D(255*V(s,n,e)),D(255*V(s,n,e-1/3)),1];return 4===t.length&&(o[3]=+t[3]),o}function X(t){return console.error(t+"不是有效的ccs颜色值"),[0,0,0,0]}var H=l(function(t){if("string"!=typeof t||!t)return X(t);var e,i=t.replace(/ /g,"").toLowerCase();if(Reflect.has(j,i))return Array.from(Reflect.get(j,i));if(i.startsWith("#"))return 4===i.length?0<=(e=parseInt(i.substr(1),16))&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:X(i):7===i.length&&0<=(e=parseInt(i.substr(1),16))&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:X(i);var r=i.indexOf("("),n=i.indexOf(")");if(-1!==r&&n+1===i.length){var s=i.substr(0,r),o=i.substr(r+1,n-(r+1)).split(","),a=1;switch(s){case"rgba":if(4!==o.length)return X(i);a=q(o.pop());case"rgb":return 3!==o.length?X(i):[W(o[0]),W(o[1]),W(o[2]),a];case"hsla":return 4!==o.length?X(i):(o[3]=q(o[3])+"",F(o));case"hsl":return 3!==o.length?X(i):F(o)}}return X(i)},50);function B(t,e){if(t&&t.length){var i=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(i+=","+t[3]),e+"("+i+")"}}var N=p("rotation left top bottom right scale scaleX scaleY width height origin originX originY"),Y=function(){function t(){this.color="#000",this.border=0,this.borderColor="#000",this.borderStyle=[],this.opacity=1,this.width="100%",this.height="100%",this.rotation=0,this.scale=[1,1],this.zIndex=0,this.clip=!1,this.origin=[.5,.5],this._res=new Set}return t.prototype.set=function(t,e){return"string"==typeof t?this.attr([t,e]):Object.entries(t).map(this.attr,this).includes(!0)},t.prototype.build=function(t,e,i){return o(this,void 0,void 0,function(){var r,n;return a(this,function(s){switch(s.label){case 0:return this.border&&(t.setLineDash(this.borderStyle),t.strokeStyle=this.borderColor,t.lineWidth=this.border),this.background?d(this.background)?(r=this.background,[4,this.loadImg(r)]):[3,2]:[3,3];case 1:return n=s.sent(),t.createPattern(n,"no-repeat").setTransform({a:e/n.width,d:i/n.height,b:0,c:0,e:0,f:0}),[3,3];case 2:t.fillStyle=this.background,s.label=3;case 3:return[2]}})})},t.prototype.setAlpha=function(t){var e=Math.max(0,Math.min(1,this.opacity));e<1&&0<t.globalAlpha&&(t.globalAlpha*=e)},t.prototype.dispose=function(){this._res.forEach(U),this._res.clear()},t.prototype.equal=function(t,e){var i=Reflect.get(this,t);return null==i&&(i=Reflect.get(this,t.substr(0,t.length-1))),"border"===t&&(e*=devicePixelRatio),Array.isArray(i)?Array.isArray(e)?("borderStyle"!==t||i.length===e.length)&&i.every(function(t,i){return t===e[i]}):t.endsWith("X")?i[0]===e:t.endsWith("Y")?i[1]===e:i.every(function(t){return t===e}):i===e},t.prototype.loadImg=function(t){void 0===t&&(t=this.src),d(t)||(console.warn(t+"不是有效的图片路径"),t=R);var e=!this._res.has(t);return this._res.add(t),z(t,e)},t.prototype.attr=function(t){var e=c(t,2),i=e[0],r=e[1],n=N(i);switch(n&&(n=n&&!this.equal(i,r)),"src"!==i&&"background"!==i||"string"!=typeof r||d(r)||(r=B(H(r),"rgba")),i){case"borderRadius":this[i]=function(t){var e=new Array(4).fill(0);if(Array.isArray(t))switch(t.length){case 1:e[0]=e[1]=t[0];case 2:e[2]=e[0];case 3:e[3]=e[1];break;default:Object.assign(e,t)}else"number"==typeof t&&e.fill(t);return e}(r);break;case"scale":case"origin":this[i]=Array.isArray(r)?r:[r,r];break;case"scaleX":case"originX":case"scaleY":case"originY":this[i.substr(0,i.length-1)][i.endsWith("X")?0:1]=r;break;case"border":r*=devicePixelRatio;default:Reflect.set(this,i,r)}return n},t}(),Z=function(){function t(){this._handlers={}}return t.prototype.on=function(t,e){return(this._handlers[t]||(this._handlers[t]=new Set)).add(e),this},t.prototype.off=function(t,e){var i=this._handlers[t];return i&&i.delete(e),this},t.prototype.notify=function(t,e,i,r){var n=this._handlers[t];return n&&n.forEach(function(t){return t.call(r,i,e)}),i.cancelBubble},t.prototype.dispose=function(){this._handlers={}},t}();function Q(t,e,i,r,n,s,o,a,h){if(Math.abs(r-n)>Number.EPSILON*Math.pow(2,10)){t.save();var c=n<r?1:r/n,u=n<r?n/r:1;t.translate(e,i),t.rotate(a),t.scale(c,u),t.arc(0,0,Math.max(r,n),s,o,!h),t.restore()}else t.arc(e,i,r,s,o,!h)}function K(t,e,i,r,n,s){var o,a,h,c,u,l;t.beginPath(),s?(o=t,a=e,h=i,c=r,u=n,l=s.map(function(t){var e=[t,t];return t<=1&&(e[0]*=c,e[1]*=u),e[0]=Math.min(e[0],c/2),e[1]=Math.min(e[1],u/2),e}),o.moveTo(a+c,h+l[1][1]),Q(o,a+c-l[1][0],h+l[1][1],l[1][0],l[1][1],0,-Math.PI/2,0,0),.001<Math.abs(l[0][0]-c+l[1][0])&&o.lineTo(a+l[0][0],h),Q(o,a+l[0][0],h+l[0][1],l[0][0],l[0][1],-Math.PI/2,Math.PI,0,0),.001<Math.abs(u-l[0][1]-l[3][1])&&o.lineTo(a,h+u-l[3][1]),Q(o,a+l[3][0],h+u-l[3][1],l[3][0],l[3][1],Math.PI,Math.PI/2,0,0),.001<Math.abs(c-l[2][0]-l[3][0])&&o.lineTo(a+c-l[2][0],h+u),Q(o,a+c-l[2][0],h+u-l[2][1],l[2][0],l[2][1],Math.PI/2,0,0,0),.001<Math.abs(l[1][1]-u+l[2][1])&&o.lineTo(a+c,h+l[1][1])):t.rect(e,i,r,n),t.closePath()}var $,G,J=function(){function t(t,e){void 0===e&&(e=!1),this.id=t,this.isStatic=e,this.type="element",this.index=0,this.transform=new C,this.events=new Z,this.isVisible=!0,this.style=new Y,this.origin=[0,0],this.width=0,this.height=0,this._needUpdate=!0,this._parentWidth=0,this._parentHeight=0,this._ignore=!0,this._dirty=!0,this._checkedPoint=new Map,this.id=b(t)}return Object.defineProperty(t.prototype,"needUpdate",{get:function(){return this._needUpdate},set:function(t){this._needUpdate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animation",{get:function(){return this._animation},set:function(t){t!==this._animation&&(this._animation&&this._animation.el.delete(this),(this._animation=t)&&t.addElement(this))},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.layer&&this.layer.remove(this,!1),this.parent&&this.parent.remove(this,!1),this.events.dispose(),this.style.dispose(),this._animation&&this._animation.el.delete(this),this._cached=this._animation=this.layer=this.parent=null},t.prototype.draw=function(t){return o(this,void 0,void 0,function(){var e,i;return a(this,function(r){switch(r.label){case 0:return this.beforeUpdate(),[4,this.getBoundingRect()];case 1:return r.sent(),this.afterUpdate(),this._isPaint(t.canvas.width,t.canvas.height)?(t.save(),this._cached&&this.isStatic?[3,3]:[4,(e=this).buildCached(this.width,this.height,t)]):[3,4];case 2:e._cached=r.sent(),r.label=3;case 3:i=this._cachedTransform?(new C).copy(this._cachedTransform).transform(this.transform):this.transform,this.setTransform(t,i),this.style.setAlpha(t),t.drawImage(this._cached,0,0,this._cached.width,this._cached.height),t.restore(),this.afterBuild(),r.label=4;case 4:return[2]}})})},t.prototype.attr=function(t,e){var i,r,n;"string"==typeof t&&((i={})[t]=e,t=i);var s=!0;try{for(var o=h(Object.entries(t)),a=o.next();!a.done;a=o.next()){var u=c(a.value,2),l=u[0],f=u[1];if(!this.style.equal(l,f)){s=!1;break}}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s||(this.style.set(t,e)&&(this.needUpdate=!0),this.markDirty()),this},t.prototype.getBoundingRect=function(){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this._needUpdate?[4,this.update()]:[3,2];case 1:t.sent(),this.rect=new O(0,0,this.width,this.height).transform(this.transform),this._needUpdate=!1,t.label=2;case 2:return[2,this.rect]}})})},t.prototype.markDirty=function(){this._dirty||(this._dirty=!0,this.parent&&this.parent.markDirty(),this.layer&&(this.layer.dirty=!0))},t.prototype.notifyEvent=function(t,e,i){var r=this.events.notify(t,e,i,this);["change","input","foucs","blur"].includes(t)||r||!this.parent||this.parent.notifyEvent(t,e,i)},t.prototype.beforeUpdate=function(){this._ignore=!0},t.prototype.update=function(){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this._parentWidth=this._getBaseSize("width"),this._parentHeight=this._getBaseSize("height"),this.isStatic&&this._cached?[3,2]:[4,this.calcSize()];case 1:t.sent(),this.style.border=Math.min(this.style.border,this.width/2,this.height/2),this.style.border<0&&(this.style.border=0),this.origin[0]=this.style.origin[0]*this.width,this.origin[1]=this.style.origin[1]*this.height,t.label=2;case 2:return this.updateTransform(),this._checkedPoint.clear(),[2]}})})},t.prototype.afterUpdate=function(){this._dirty=!1},t.prototype.beforeBuild=function(){},t.prototype.build=function(t){return o(this,void 0,void 0,function(){var e,i,r;return a(this,function(n){switch(n.label){case 0:return e=this.style.border,i=this.width-e,r=this.height-e,K(t,0,0,i,r,this.style.borderRadius),[4,this.style.build(t,i,r)];case 1:return n.sent(),this.style.background&&t.fill(),e&&this.style.borderColor&&t.stroke(),[2]}})})},t.prototype.afterBuild=function(){this._ignore=!1},t.prototype.calcSize=function(){return o(this,void 0,void 0,function(){return a(this,function(t){return this.width=k(this.style.width,this._parentWidth),this.height=k(this.style.height,this._parentHeight),[2]})})},t.prototype.updateTransform=function(){var t=this.style,e=this.left,i=this.top;if(null==e&&(e=null!=t.left?k(t.left,this._parentWidth):null!=t.right?this._parentWidth-k(t.right,this._parentWidth)-this.width:k("50%",this._parentWidth)-this.width/2),null==i&&(i=null!=t.top?k(t.top,this._parentHeight):null!=t.bottom?this._parentHeight-k(t.bottom,this._parentHeight)-this.height:k("50%",this._parentHeight)-this.height/2),this.transform.toUnit().translate(-this.origin[0],-this.origin[1]).scale(t.scale).rotate(t.rotation).translate(e+this.origin[0],i+this.origin[1]),this.parent){var r=this.parent;this.transform.translate(r.style.border,r.style.border).transform(r.transform)}},t.prototype.buildCached=function(t,e,i){return o(this,void 0,void 0,function(){var i,r;return a(this,function(n){switch(n.label){case 0:return(i=document.createElement("canvas")).width=t,i.height=e,(r=i.getContext("2d")).save(),r.translate(this.style.border/2,this.style.border/2),[4,this.build(r)];case 1:return n.sent(),r.restore(),[2,i]}})})},t.prototype.getTarget=function(t,e,i){return!!this._contain(t,e,i)&&this},t.prototype.setTransform=function(t,e){void 0===e&&(e=this.transform);var i=e.a,r=e.b,n=e.c,s=e.d,o=e.e,a=e.f;t.transform(i,r,n,s,o,a),t.translate(this.style.border/2,this.style.border/2),this.beforeBuild()},t.prototype.getParentSize=function(t){return"width"===t?this._parentWidth:"height"===t?this._parentHeight:0},t.prototype._contain=function(t,e,i){if(this._ignore)return!1;var r=e+"_"+i;if(this._checkedPoint.has(r))return this._checkedPoint.get(r);if(this.rect&&!this.rect.contain(e,i))return this._checkedPoint.set(r,!1),!1;var n=this.getParent(function(t){return t.style.clip});if(n){var s=n.style.border;if(t.setTransform(n.transform),t.translate(s,s),K(t,0,0,n.width-2*s,n.height-2*s,n.style.borderRadius),!t.isPointInPath(e,i))return t.setTransform(1,0,0,1,0,0),this._checkedPoint.set(r,!1),!1}t.setTransform(this.transform),this.buildPath(t),t.setTransform(1,0,0,1,0,0);var o=t.isPointInPath(e,i);return this._checkedPoint.set(r,o),o},t.prototype.buildPath=function(t){K(t,0,0,this.width,this.height,this.style.borderRadius)},t.prototype._getBaseSize=function(t){var e=0;return this.parent?(e=this.parent[t],this.parent.style.border&&(e-=2*this.parent.style.border)):this.layer&&this.layer.canvas&&(e=this.layer.canvas[t]),e},t.prototype._isPaint=function(t,e){if(this.isVisible&&this.style.opacity&&this.style.scale[0]&&this.style.scale[1]&&0<=this.width&&0<=this.height){var i=this.getParent(function(t){return t.style.clip});return i?this.rect.intersect(i.rect):!(!this.isStatic&&!this.getParent(function(t){return t.isStatic})||this._cached)||this.rect.intersect(0,0,t,e)}return!1},t.prototype.getParent=function(t){for(var e=this.parent;e;){if(t(e))return e;e=e.parent}},t}(),tt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="container",e.children=[],e}return n(e,t),Object.defineProperty(e.prototype,"needUpdate",{get:function(){return this._needUpdate},set:function(t){t!==this._needUpdate&&(!(this._needUpdate=t)||this.isStatic&&this._cached||this.children.forEach(function(t){return t.needUpdate=!0}))},enumerable:!0,configurable:!0}),e.prototype.attr=function(e,i){var r;return"string"==typeof e&&((r={})[e]=i,e=r),(Reflect.has(e,"clip")||Reflect.has(e,"border"))&&this.children.forEach(function(t){return t.needUpdate=!0}),t.prototype.attr.call(this,e,i),this},e.prototype.build=function(e){return o(this,void 0,void 0,function(){return a(this,function(i){switch(i.label){case 0:return[4,t.prototype.build.call(this,e)];case 1:return i.sent(),e.restore(),e.save(),this.style.clip&&e.clip(),[2,this._renderChildren(e)]}})})},e.prototype.remove=function(t,e){void 0===e&&(e=!0);var i=this.children.findIndex(function(e){return e===t});return 0<=i&&(t.parent=null,this.children.splice(i,1),e&&t.dispose(),this.markDirty()),this},e.prototype.add=function(t){var e=this,i=t.parent||t.layer;if(i!==this){i&&i.remove(t,!1),t.parent=this,t.left=t.top=null,t.needUpdate=!0,t.index=this.children.length;var r=v(function(i){return t.style.zIndex-e.children[i].style.zIndex||1},this.children.length);this.children.splice(r,0,t),this.markDirty()}return this},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.children.forEach(function(t){t.parent=null,t.dispose()}),this.children.length=0},e.prototype.buildCached=function(t,e,i){return o(this,void 0,void 0,function(){var t,e,r,n,s,o,h,c,u,l,f,d;return a(this,function(a){switch(a.label){case 0:return this.isStatic&&this.setChildrenProps("isStatic",!1),t=this.transform.invert(),[4,this._getMaxRect()];case 1:return e=a.sent().transform(t),r=i.canvas.width/e.w,n=i.canvas.height/e.h,(s=document.createElement("canvas")).width=i.canvas.width,s.height=i.canvas.height,(o=s.getContext("2d")).scale(r,n),h=t.a,c=t.b,u=t.c,l=t.d,f=t.e,d=t.f,o.transform(h,c,u,l,f-e.x,d-e.y),o.save(),this.setTransform(o),[4,this.build(o)];case 2:return a.sent(),o.restore(),this._cachedTransform=new C(1/r,0,e.x,0,1/n,e.y),[2,s]}})})},e.prototype.getTarget=function(t,e,i){for(var r=this.children.length-1;0<=r;r--){var n=this.children[r].getTarget(t,e,i);if(n)return n}return!!this._contain(t,e,i)&&this},e.prototype.setChildrenProps=function(t,i){this.children.forEach(function(r){Reflect.set(r,t,i),r instanceof e&&r.setChildrenProps(t,i)})},e.prototype._renderChildren=function(t){var e=this;return new Promise(function(i){var r=function(n){return o(e,void 0,void 0,function(){var e;return a(this,function(s){switch(s.label){case 0:return(e=this.children[n++])?[4,e.draw(t)]:[3,2];case 1:return s.sent(),r(n),[3,3];case 2:i(),s.label=3;case 3:return[2]}})})};r(0)})},e.prototype._getMaxRect=function(){return o(this,void 0,void 0,function(){var t,i,r,n,s,o,c,u;return a(this,function(a){switch(a.label){case 0:return[4,this.getBoundingRect()];case 1:r=a.sent().clone(),a.label=2;case 2:a.trys.push([2,7,8,9]),n=h(this.children),s=n.next(),a.label=3;case 3:return s.done?[3,6]:[4,(o=s.value)instanceof e?o._getMaxRect():o.getBoundingRect()];case 4:c=a.sent(),r.extend(c),a.label=5;case 5:return s=n.next(),[3,3];case 6:return[3,9];case 7:return u=a.sent(),t={error:u},[3,9];case 8:try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}return[7];case 9:return[2,r]}})})},e}(J),et=function(t){function e(e){var i=t.call(this,e,!1)||this;return i.type="image",i._cellId=-1,i.style.width=i.style.height=0,i}return n(e,t),e.prototype.attr=function(e,i){var r;"string"==typeof e&&((r={})[e]=i,e=r),this._setCell(e);var n=Reflect.has(e,"src")&&e.src!==this.style.src;return t.prototype.attr.call(this,e,i),!n||this.style.width&&this.style.height||(this.needUpdate=!0),this},e.prototype.build=function(t){return o(this,void 0,void 0,function(){var e,i,r,n,s,o;return a(this,function(a){switch(a.label){case 0:return[4,this.style.loadImg()];case 1:return e=a.sent(),i=Math.min(k(this._cellWidth,e.width),e.width),r=Math.min(k(this._cellHeight,e.height),e.height),0<=this._cellId&&0<i&&0<r?(n=Math.floor(this._cellId+1)*i,s=n%e.width-i,o=Math.floor(n/e.width)*r,y(n%e.width)&&(s=e.width-i,o-=r),s=Math.max(Math.min(s,e.width-i),0),o=Math.max(Math.min(o,e.height-r),0),t.drawImage(e,s,o,i,r,0,0,this.width,this.height)):t.drawImage(e,0,0,this.width,this.height),[2]}})})},e.prototype.update=function(){return o(this,void 0,void 0,function(){return a(this,function(e){return this.style.background="",this.style.border=0,this.isStatic=!1,[2,t.prototype.update.call(this)]})})},e.prototype.calcSize=function(){return o(this,void 0,void 0,function(){var e,i;return a(this,function(r){switch(r.label){case 0:return[4,t.prototype.calcSize.call(this)];case 1:return r.sent(),this.width<=0?[4,this.style.loadImg()]:[3,3];case 2:e=r.sent(),this.width=e.width,r.label=3;case 3:return this.height<=0?(i=e)?[3,5]:[4,this.style.loadImg()]:[3,6];case 4:i=r.sent(),r.label=5;case 5:e=i,this.height=e.height,r.label=6;case 6:return[2]}})})},e.prototype._setCell=function(t){var e=this;["cellId","cellWidth","cellHeight"].forEach(function(i){Reflect.has(t,i)&&(Reflect.set(e,"_"+i,Reflect.get(t,i)),Reflect.deleteProperty(t,i))})},e}(J),it=l(function(t,e){return t.split("\n").reduce(function(t,i){return Math.max(t,function(t,e){var i=M(null);return e&&(i.font=e),i.measureText(t).width}(i,e))},0)},5e3),rt=p("fontStyle fontVariant fontWeight fontSize fontFamily"),nt=p("lineHeight letterSpacing textWarp indent strokeWidth text"),st=function(t){function e(e,i){void 0===i&&(i=!0);var r=t.call(this,e,i)||this;return r.type="text",r.text="",r.textMap=[],r._textAlign="left",r._verticalAlign="top",r._strokeColor="#000",r._strokeWidth=0,r._lineHeight=0,r._letterSpacing=0,r._textWarp="warp",r._indent=0,r._font=[null,null,null,"12px","sans-serif"],r._modifyText=!1,r.style.height=0,r.style.color="",r}return n(e,t),Object.defineProperty(e.prototype,"fontStyle",{set:function(t){this._setFont(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{set:function(t){this._setFont(t,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{set:function(t){"number"==typeof t&&(t=""+t),this._setFont(t,2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{set:function(t){"number"==typeof t&&(t+="px"),this._setFont(t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{set:function(t){this._setFont(t,4)},enumerable:!0,configurable:!0}),e.prototype.build=function(e){return o(this,void 0,void 0,function(){var i,r,n,s=this;return a(this,function(o){switch(o.label){case 0:return(i=this.textMap[this.textMap.length-1])?[4,t.prototype.build.call(this,e)]:[3,2];case 1:o.sent(),e.clip(),e.textBaseline="top",(r=this.style.color||(this.parent?this.parent.style.color:""))&&(e.fillStyle=r),this._strokeWidth&&(e.strokeStyle=this._strokeColor),(n=this._font.filter(function(t){return null!=t&&""!==t}).join(" "))&&(e.font=n),this.textMap.forEach(function(t){var r=s._adjustX(i,t),n=s._adjustY(i,t);s._strokeWidth&&e.strokeText(t.char,r,n),e.fillText(t.char,r,n)}),o.label=2;case 2:return this.isStatic&&(this.textMap.length=0),[2]}})})},e.prototype.setTextStyle=function(t,e){return this._modifyText=!1,"string"==typeof t?this._setTextStyle([t,e]):Object.entries(t).forEach(this._setTextStyle,this),this._modifyText&&!this.isStatic&&(!this.style.height&&null==this.style.top||!this.style.width&&null==this.style.left?this.needUpdate=!0:this.needUpdate||this._parseText()),this},e.prototype.beforeUpdate=function(){t.prototype.beforeUpdate.call(this),this.style.border=0},e.prototype.calcSize=function(){return o(this,void 0,void 0,function(){var e;return a(this,function(i){switch(i.label){case 0:return[4,t.prototype.calcSize.call(this)];case 1:return i.sent(),this._parseText(),this.height<=0&&(this.height=0,(e=this.textMap[this.textMap.length-1])&&(this.height=e.y+e.height)),[2]}})})},e.prototype._parseText=function(){var t,e;if(this.textMap.length=0,this.isStatic&&this._cached)return this.width=this._cached.width,void(this.height=this._cached.height);if(this.text){var i=this._font.filter(function(t){return null!=t&&""!==t}).join(" "),r=this._lineHeight||it("国",i);this.style.width||(this.width=1/0);var n=it("...",i),s=this.text.replace(/\n*$/,"").split("\n"),o={y:0,lineHeight:r,font:i,ellipsisWidth:n},a=0;try{for(var c=h(s),u=c.next();!u.done;u=c.next()){var l=u.value;this._setTextMap(l,o);var f=this.textMap[this.textMap.length-1];if(f&&(a=Math.max(a,f.x+f.width)),o.y+=r,0<this.height&&o.y>this.height)break}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}this.width===1/0&&(this.width=a)}},e.prototype._setTextMap=function(t,e){var i=0;this.textMap.length||(i+=this._indent);for(var r=0;r<t.length;r++){r&&(i+=this._letterSpacing);var n=it(t[r],e.font)+this._strokeWidth,s={char:t[r],x:i,y:e.y,width:n,height:e.lineHeight};if((i+=n)>this.width){if("warp"!==this._textWarp)return this._addEllipsis(s,e.ellipsisWidth);if(s.x=0,i=n,s.y+=e.lineHeight,e.y+=e.lineHeight,0<this.height&&e.y>this.height)return}else if("ellipsis"===this._textWarp&&r<t.length-1&&i+e.ellipsisWidth>this.width)return this._addEllipsis(s,e.ellipsisWidth);this.textMap.push(s)}},e.prototype._addEllipsis=function(t,e){"ellipsis"===this._textWarp&&(t.char="...",t.width=e,this.textMap.push(t))},e.prototype._setFont=function(t,e){t!==this._font[e]&&(this._font[e]=t,this._modifyText=!0,this.markDirty())},e.prototype._setTextStyle=function(t){var e=c(t,2),i=e[0],r=e[1];if(rt(i))this[i]=r;else{var n="text"===i?i:"_"+i;"number"==typeof r&&(r*=devicePixelRatio),Reflect.get(this,n)!==r&&(Reflect.set(this,n,r),nt(i)&&(this._modifyText=!0),this.markDirty())}},e.prototype._adjustX=function(t,e){var i=this.width-t.x-t.width;if(0<i&&e.y===t.y){if("center"===this._textAlign)return e.x+i/2;if("right"===this._textAlign)return e.x+i}return e.x},e.prototype._adjustY=function(t,e){var i=this.height-t.y-t.height;if(0<i){if("middle"===this._verticalAlign)return e.y+i/2;if("bottom"===this._verticalAlign)return e.y+i}return e.y},e}(J),ot={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-ot.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*ot.bounceIn(2*t):.5*ot.bounceOut(2*t-1)+.5}},at=["width","height","scaleX","scaleY","rotation","left","right","top","bottom","opacity","color","background","cellId"],ht=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=1),void 0===i&&(i=0),void 0===r&&(r="linear"),this.time=t,this.count=e,this.delay=i,this.easing=r,this.el=new Map,this._endCall=new Set,this._startTime=0,this._pauseTime=0,this._prevTime=0,this._isStart=!1,this._isPause=!1,this.width={},this.height={},this.scaleX={},this.scaleY={},this.rotation={},this.left={},this.right={},this.top={},this.bottom={},this.opacity={},this.color={},this.background={},this.cellId={},this.errKey=new Set}return t.prototype.addFrame=function(t,e,i){var r=this;if(void 0===i&&(i=!0),this.errKey.clear(),t=this._parseFrame(t),Reflect.has(e,"scale")){var n=Array.isArray(e.scale)?e.scale:[e.scale,e.scale];e.scaleX=n[0],e.scaleY=n[1]}return at.forEach(function(n){var s=Reflect.get(e,n),o=Reflect.get(r,n);""===s||!i&&Reflect.has(o,t)||("number"==typeof s||"string"==typeof s?("color"!==n&&"background"!==n||(s=H(s)),Reflect.set(o,t,s)):null!=s&&console.warn("只能用number及string类型设置动画"))}),this},t.prototype.addElement=function(t){if(!this.el.has(t)){var e=t.style,i={width:e.width,height:e.height,rotation:e.rotation,left:e.left,right:e.right,top:e.top,bottom:e.bottom,opacity:e.opacity,scaleX:e.scale[0],scaleY:e.scale[1]};"string"==typeof e.color&&(i.color=H(e.color)),"string"!=typeof e.background||d(e.background)||(i.background=H(e.background)),t instanceof et&&(i.cellId=0),this.el.set(t,i),t.animation!==this&&(t.animation=this)}return this},t.prototype.addEndCall=function(t){return this._endCall.add(t),this},t.prototype.removeEndCall=function(t){return this._endCall.delete(t),this},t.prototype.dispose=function(){this._timer&&cancelAnimationFrame(this._timer),this._endCall.clear(),this.el.forEach(function(t){return t.animation=null}),this.el.clear()},t.prototype.start=function(t){void 0===t&&(t=Date.now()),this._isStart||(this.stop(),this._startTime=t+this.delay,this._isStart=!0,this._pauseTime=this._prevTime=0,this._play()),this._isPause=!1},t.prototype.pause=function(){this._isPause=!0},t.prototype.stop=function(){this._isStart=this._isPause=!1,this._timer&&cancelAnimationFrame(this._timer)},t.prototype.notify=function(){this._endCall.forEach(function(t){return t()})},t.prototype._end=function(){this.stop(),this.notify(),0<--this.count&&this.start()},t.prototype._play=function(){var t,e,i=this;if(this._isStart&&this.el.size){var r=Date.now();if(r>=this._startTime){var n=Math.min(1,(r-this._startTime-this._pauseTime)/this.time);if(this._isPause)this._pauseTime+=r-this._prevTime;else try{for(var s=h(this.el.entries()),o=s.next();!o.done;o=s.next()){var a=c(o.value,2),u=a[0],l=a[1];u.animation===this?u.attr(this._getAttr(n,l)):this.el.delete(u)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}if(r-this._startTime-this._pauseTime>this.time)return this._end();this._prevTime=r}this._timer=requestAnimationFrame(function(){return i._play()})}},t.prototype._getAttr=function(t,e){var i=this,r={};return at.forEach(function(n){var o=s({},Reflect.get(i,n));o[0]=null==o[0]?Reflect.get(e,n):o[0];var a=Object.keys(o).sort(function(t,e){return+t-+e}),h=a.findIndex(function(e){return t<=+e}),c=o[a[h]];if(null!=c){var u=o[a[h-1]],l=typeof c,f=typeof u;if(l===f){var d=1-(+a[h]-t)/(+a[h]-+a[h-1]);if(d=function(t){t=_(t);var e=Reflect.get(ot,t);return"function"!=typeof e?(console.error("缓动函数"+t+"不存在"),ot.linear):e}(i.easing)(d),Array.isArray(c))c=c.map(function(t,e){return(t-u[e])*d+u[e]});else if("number"===l)c=(c-u)*d+u;else if("string"===l){var p=/^([\+-]?\d+)(.*)$/;c=p.test(c)?c.replace(p,function(t,e,r){var s=+parseFloat(u);return(p=new RegExp("^[\\+-]?\\d+"+r+"$")).test(u)||(i._warnOnce(n),s=0),(+e-s)*d+s+r}):0}}else"undefined"!==f&&i._warnOnce(n);Array.isArray(c)&&(c=B(c,"rgba")),Reflect.set(r,n,c)}}),r},t.prototype._parseFrame=function(t){var e;return"string"==typeof t?(e=parseFloat(t)||0,t.endsWith("%")&&(e/=100)):e=t,Math.max(0,Math.min(e,1))},t.prototype._warnOnce=function(t){this.errKey.has(t)||(console.error("对属性"+t+"的设置存在类型不一样的设置"),this.errKey.add(t))},t}(),ct=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.type="stack",r._isVertical=!0,r.style.width=r.style.height=0,r}return n(e,t),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){t!==this._isVertical&&(this._isVertical=t,this.needUpdate=!0)},enumerable:!0,configurable:!0}),e.prototype.remove=function(e,i){return void 0===i&&(i=!0),t.prototype.remove.call(this,e,i),this.style.width&&this.style.height||(this.needUpdate=!0),this},e.prototype.add=function(e){return t.prototype.add.call(this,e),this.style.width&&this.style.height||(this.needUpdate=!0),this},e.prototype.calcSize=function(){return o(this,void 0,void 0,function(){var e,i,r,n,s,o,h;return a(this,function(a){switch(a.label){case 0:return[4,t.prototype.calcSize.call(this)];case 1:return a.sent(),e="height",i="width",r="top",this._isVertical||(e="width",r="left",i="height"),n=this[e],this[e]=this.getParentSize(e),[4,this._calcSize(e,r,i)];case 2:return s=c.apply(void 0,[a.sent(),2]),o=s[0],h=s[1],this[e]=n||o,this[i]=this[i]||h,[2]}})})},e.prototype._calcSize=function(t,e,i){return o(this,void 0,void 0,function(){var r,n,s,o,c,u,l,f,d;return a(this,function(a){switch(a.label){case 0:o=s=0,c="left"===e?"right":"bottom",a.label=1;case 1:a.trys.push([1,6,7,8]),u=h(Array.from(this.children).sort(function(t,e){return t.index-e.index})),l=u.next(),a.label=2;case 2:return l.done?[3,5]:(f=l.value,s+=k(f.style[e],0),f[e]=s,[4,f.calcSize()]);case 3:a.sent(),s+=f[t]+k(f.style[c],0),o=Math.max(o,f[i]),f.isVisible=!!f[t]&&f.isVisible,a.label=4;case 4:return l=u.next(),[3,2];case 5:return[3,8];case 6:return d=a.sent(),r={error:d},[3,8];case 7:try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}return[7];case 8:return[2,[s,o]]}})})},e}(tt),ut=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.type="scroll",r.children=[],r.move=0,r.more=10,r._isVertical=!0,r._isDown=!1,r._downPoint=0,r._maxMove=0,r._upCall=function(){r._isDown=!1,(0<r.move||r.move<-r._maxMove)&&(r.move=Math.min(0,Math.max(r.move,-r._maxMove)),r.needUpdate=!0,r.markDirty())},t.prototype.add.call(r,new ct("__scroll__"+e).attr("zIndex",-Number.MAX_VALUE)),r.events.on("mousedown",r._downCall),r.events.on("mousemove",r._moveCall),r.events.on("touchstart",r._downCall),r.events.on("touchmove",r._moveCall),P(document,"mouseup",r._upCall),P(document,"touchend",r._upCall),r}return n(e,t),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){t!==this._isVertical&&(this._isVertical=t,this.move=0,this.needUpdate=!0,this.children[0].isVertical=t)},enumerable:!0,configurable:!0}),e.prototype.remove=function(t,e){return void 0===e&&(e=!0),this.children[0].remove(t,e),this},e.prototype.add=function(t){return this.children[0].add(t),this},e.prototype.dispose=function(){t.prototype.dispose.call(this),T(document,"mouseup",this._upCall),T(document,"touchend",this._upCall)},e.prototype.beforeUpdate=function(){t.prototype.beforeUpdate.call(this),this.style.clip=!0,this.children.length=1,this.children[0].style[this._isVertical?"top":"left"]=this.move,this.children[0].isVertical=this._isVertical,this.children[0].isStatic=this.isStatic,this.isStatic=!1},e.prototype.getTarget=function(e,i,r){var n=t.prototype.getTarget.call(this,e,i,r);return n===this.children[0]?this:n},e.prototype._downCall=function(t){this._isDown=!0,this._downPoint=this._isVertical?t.y:t.x},e.prototype._moveCall=function(t,e){if(this._isDown){e.preventDefault?e.preventDefault():e.returnValue=!1;var i=(this._isVertical?t.y:t.x)-this._downPoint,r=this._isVertical?"height":"width";this._maxMove=this.children[0][r]-this[r]+2*this.style.border,.001<Math.abs(i)&&1<=this._maxMove&&(this.move+=i,this.move=Math.min(this.more,Math.max(this.move,-this._maxMove-this.more)),this.needUpdate=!0,this.markDirty())}},e}(tt),lt=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=e);var r=t.call(this)||this;return r.x=e,r.y=i,r}return n(e,t),e.createMin=function(t,i){return Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]),new e(Math.min.apply(Math,u(t)),Math.min.apply(Math,u(i)))},e.createMax=function(t,i){return Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]),new e(Math.max.apply(Math,u(t)),Math.max.apply(Math,u(i)))},e.prototype.toMin=function(t){return this.x=Math.min(t.x,this.x),this.y=Math.min(t.y,this.y),this},e.prototype.toMax=function(t){return this.x=Math.max(t.x,this.x),this.y=Math.max(t.y,this.y),this},e.prototype.transform=function(t){return t instanceof C&&(t=t.toArray()),this.x=t[0][0]*this.x+t[0][1]*this.y+t[0][2],this.y=t[1][0]*this.x+t[1][1]*this.y+t[1][2],this},e}(I),ft=l(function(t){if((t=Math.trunc(t))<0)return[];var e=[];e[0]=e[1]=1;for(var i=3;i<=t;i++){var r=e.slice(0,i-1);e[0]=e[i-1]=1;for(var n=0;n<i-2;n++)e[n+1]=r[n]+r[n+1]}return e});function dt(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=e.length-1,n=ft(r+1);return e.reduce(function(e,i,s){return e+n[s]*i*Math.pow(1-t,r-s)*Math.pow(t,s)},0)}function pt(t,e,i,r){var n=9*e+3*r-3*t-9*i,s=6*i-12*e+6*t,o=3*e-3*t,a=[];if(y(n))y(s)||0<=(c=-o/s)&&c<=1&&a.push(c);else{var h=s*s-4*n*o;if(!y(h)&&0<h){var c,u=Math.sqrt(h),l=(-s-u)/(2*n);0<=(c=(-s+u)/(2*n))&&c<=1&&a.push(c),0<=l&&l<=1&&a.push(l)}}return a}function yt(t,e,i){var r=t+i-2*e;return 0===r?.5:Math.max(Math.min((t-e)/r,1),0)}function vt(t,e,i,r){return[lt.createMin([t,i],[e,r]),lt.createMax([t,i],[e,r])]}function gt(t,e,i,r,n,s,o,a){var h=lt.createMin([t,o],[e,a]),c=lt.createMax([t,o],[e,a]);return pt(t,i,n,o).forEach(function(e){var r=dt(e,t,i,n,o);h.x=Math.min(h.x,r),c.x=Math.max(c.x,r)}),pt(e,r,s,a).forEach(function(t){var i=dt(t,e,r,s,a);h.y=Math.min(h.y,i),c.y=Math.max(c.y,i)}),[h,c]}function mt(t,e,i,r,n,s,o){var a=Math.abs(n-s),h=2*Math.PI;if(a%h<1e-4&&1e-4<a)return[new lt(t-i,e-r),new lt(t+i,e+r)];var c=[],u=[];c[0]=Math.cos(n)*i+t,c[1]=Math.cos(s)*i+t,u[0]=Math.sin(n)*r+e,u[1]=Math.sin(s)*r+e;var l=lt.createMin(c,u),f=lt.createMax(c,u);if((n%=h)<0&&(n+=h),(s%=h)<0&&(s+=h),s<n&&!o?s+=h:n<s&&o&&(n+=h),o){var d=s;s=n,n=d}for(var p=0;p<s;p+=Math.PI/2)if(n<p){var y=new lt(Math.cos(p)*i+t,Math.sin(p)*r+e);l.toMin(y),f.toMax(y)}return[l,f]}(G=$||($={}))[G.M=1]="M",G[G.L=2]="L",G[G.C=3]="C",G[G.Q=4]="Q",G[G.A=5]="A",G[G.Z=6]="Z",G[G.R=7]="R";var _t=function(){function t(){this.lineDash=[],this._len=0}return Object.defineProperty(t.prototype,"context",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"len",{get:function(){return this._len},enumerable:!0,configurable:!0}),t.prototype.beginPath=function(t){return this._ctx=t,this._len=0,t&&(t.beginPath(),t.setLineDash(this.lineDash)),this},t.prototype.moveTo=function(t,e){return this.addData($.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this},t.prototype.lineTo=function(t,e){return this.addData($.L,t,e),this._ctx&&this._ctx.lineTo(t,e),this},t.prototype.bezierCurveTo=function(t,e,i,r,n,s){return this.addData($.C,t,e,i,r,n,s),this._ctx&&this._ctx.bezierCurveTo(t,e,i,r,n,s),this},t.prototype.quadraticCurveTo=function(t,e,i,r){return this.addData($.Q,t,e,i,r),this._ctx&&this._ctx.quadraticCurveTo(t,e,i,r),this},t.prototype.arc=function(t,e,i,r,n,s){return void 0===n&&(n=0),void 0===s&&(s=0),Array.isArray(t)||(t=[t,t]),Array.isArray(e)||(e=[e,e]),this.addData($.A,t[0],t[1],e[0],e[1],i,r,n,s),this._ctx&&Q(this._ctx,t[0],t[1],e[0],e[1],i,r,n,s),this},t.prototype.rect=function(t,e,i,r){return this.addData($.R,t,e,i,r),this._ctx&&this._ctx.rect(t,e,i,r),this},t.prototype.closePath=function(){return this.addData($.Z),this._ctx&&this._ctx.closePath(),this},t.prototype.setData=function(t){var e=this._len=t.length;this.data&&this.data.length===e||(this.data=new Float32Array(e));for(var i=0;i<e;i++)this.data[i]=t[i];return this},t.prototype.appendPath=function(t){var e=this;Array.isArray(t)||(t=[t]);var i=t.reduce(function(t,e){return t+e.len},0);return this.data=new Float32Array(this._len+i),t.forEach(function(t){if(t.data)for(var i=0;i<t.data.length;i++)e.data[e._len++]=t.data[i]}),this},t.prototype.getBoundingRect=function(){for(var t,e,i,r,n,s,o,a,h,u,l,f,d,p=new lt(Number.MAX_VALUE),y=new lt(-Number.MAX_VALUE),v=this.data||[],g=0,m=0,_=0,b=0,w=0;w<this._len;){var x=new lt(Number.MAX_VALUE),M=new lt(-Number.MAX_VALUE);switch(w||(_=g=v[w+1],b=m=v[w+2]),v[w++]){case $.M:x.x=M.x=g=_=v[w++],x.y=M.y=m=b=v[w++];break;case $.L:x=(t=c(vt(g,m,v[w],v[w+1]),2))[0],M=t[1],g=v[w++],m=v[w++];break;case $.C:x=(e=c(gt(g,m,v[w++],v[w++],v[w++],v[w++],v[w],v[w+1]),2))[0],M=e[1],g=v[w++],m=v[w++];break;case $.Q:x=(i=c((s=g,o=m,a=v[w++],h=v[w++],u=v[w],l=v[w+1],f=dt(yt(s,a,u),s,a,u),d=dt(yt(o,h,l),o,h,l),[lt.createMin([s,u,f],[o,l,d]),lt.createMax([s,u,f],[o,l,d])]),2))[0],M=i[1],g=v[w++],m=v[w++];break;case $.A:var k=1===w,P=v[w++],T=v[w++],A=v[w++],S=v[w++],I=v[w++],C=v[w++];w++;var E=1-v[w++];k&&(_=Math.cos(I)*A+P,b=Math.sin(I)*S+T),x=(r=c(mt(P,T,A,S,I,C,E),2))[0],M=r[1],g=Math.cos(C)*A+P,m=Math.sin(C)*S+T;break;case $.R:_=g=v[w++],b=m=v[w++],x=(n=c(vt(g,m,g+v[w++],m+v[w++]),2))[0],M=n[1];break;case $.Z:g=_,m=b}p.toMin(x),y.toMax(M)}return new O(p.x,p.y,y.x-p.x,y.y-p.y)},t.prototype.rebuildPath=function(t){for(var e=this.data||[],i=0;i<this._len;)switch(e[i++]){case $.M:t.moveTo(e[i++],e[i++]);break;case $.L:t.lineTo(e[i++],e[i++]);break;case $.C:t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);break;case $.Q:t.quadraticCurveTo(e[i++],e[i++],e[i++],e[i++]);break;case $.A:Q(t,e[i++],e[i++],e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);break;case $.R:t.rect(e[i++],e[i++],e[i++],e[i++]);break;case $.Z:t.closePath();break;default:return void console.error("data数据错误。未找到对应的绘图命令: "+e[i-1])}},t.prototype.addData=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=this.data;return(!r||this._len+e.length>r.length)&&(r=this._expandData()),e.forEach(function(e){return r[t._len++]=e}),this.toStatic(r),this},t.prototype._expandData=function(){var t=[];if(this.data)for(var e=0;e<this._len;e++)t[e]=this.data[e];return t},t.prototype.toStatic=function(t){Array.isArray(t)&&(t.length=this._len,this.data=new Float32Array(t))},t.CMD=$,t}(),bt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._path=new _t,e}return n(e,t),e.prototype.moveTo=function(t,e){return this._path.moveTo(t,e),this},e.prototype.lineTo=function(t,e){return this._path.lineTo(t,e),this},e.prototype.bezierCurveTo=function(t,e,i,r,n,s){return this._path.bezierCurveTo(t,e,i,r,n,s),this},e.prototype.quadraticCurveTo=function(t,e,i,r){return this._path.quadraticCurveTo(t,e,i,r),this},e.prototype.arc=function(t,e,i,r,n,s){return void 0===n&&(n=0),void 0===s&&(s=0),this._path.arc(t,e,i,r,n,s),this},e.prototype.rectPath=function(t,e,i,r){return this._path.rect(t,e,i,r),this},e.prototype.closePath=function(){return this._path.closePath(),this},e.prototype.setData=function(t){return this._path.setData(t),this},e.prototype.appendPath=function(t){return this._path.appendPath(t),this},e.prototype.build=function(t){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this._path.len?(this.buildPath(t),[4,this.style.build(t,this.width,this.height)]):[2];case 1:return e.sent(),this.style.background&&t.fill(),t.stroke(),[2]}})})},e.prototype.buildCached=function(){return o(this,void 0,void 0,function(){var t,e;return a(this,function(i){switch(i.label){case 0:return(t=document.createElement("canvas")).width=this.getParentSize("width"),t.height=this.getParentSize("height"),(e=t.getContext("2d")).save(),[4,this.build(e)];case 1:return i.sent(),e.restore(),[2,t]}})})},e.prototype.getBoundingRect=function(){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this._needUpdate?[4,this.update()]:[3,2];case 1:t.sent(),this.rect.transform(this.transform),this._needUpdate=!1,t.label=2;case 2:return[2,this.rect]}})})},e.prototype.beforeUpdate=function(){t.prototype.beforeUpdate.call(this),this.style.border=this.style.border||1},e.prototype.calcSize=function(){return o(this,void 0,void 0,function(){var t;return a(this,function(e){return t=this._path.getBoundingRect(),this.width=t.w,this.height=t.h,t.w+=this.style.border,t.h+=this.style.border,this.rect=t,[2]})})},e.prototype.updateTransform=function(){this.transform.toUnit(),this.parent&&this.transform.transform(this.parent.transform)},e.prototype.buildPath=function(t){t.beginPath(),this._path.rebuildPath(t)},e}(J);i.d(e,"Layer",function(){return A}),i.d(e,"Engine",function(){return S}),i.d(e,"Canvas2DElement",function(){return J}),i.d(e,"Container",function(){return tt}),i.d(e,"Canvas2DImage",function(){return et}),i.d(e,"TextBlock",function(){return st}),i.d(e,"Canvas2DAnimation",function(){return ht}),i.d(e,"Stack",function(){return ct}),i.d(e,"Scroll",function(){return ut}),i.d(e,"PathElement",function(){return bt}),i.d(e,"Path",function(){return _t})}])});
//# sourceMappingURL=ws-gui.js.map